{"cells":[{"cell_type":"markdown","metadata":{"id":"-0-qnEblh80w"},"source":["# Rule Unit 작성 예시\n","\n","본 문서는 1차년도 6월에 개발된 RuleUnit 클래스를 활용하여 룰 유닛을 작성하고 실행하는 과정을 설명합니다."]},{"cell_type":"markdown","metadata":{"id":"AR83L9Pxh_6F"},"source":["⚠︎ 주의사항: 코드를 변경하며 작업할 때는, 사본을 생성한 후 작업해주십시오."]},{"cell_type":"markdown","metadata":{"id":"33RPd0N_iCuY"},"source":["## 룰 유닛 작성하기\n","이 부분에서는 기존의 IFC 파일에 종속적이었던 실행 흐름에서 벗어나, 새로이 정의한 RuleUnit 구조에 기반하여 룰에 포함된 항목을 작성하는 방법을 다룹니다.<br><br>\n","본 예시에서는 KDS 24 14 21 4.6.5.1(5) 를 룰 유닛으로 작성합니다."]},{"cell_type":"markdown","metadata":{"id":"qL08gaStiE0L"},"source":["먼저, Rule 작성에 필요한 프로그램을 불러오기 위해 Github에서 아래의 주소가 가리키는 파일 모음을 불러옵니다. (Github Repository를 clone합니다.)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"5AR_68PDk-KZ","executionInfo":{"status":"ok","timestamp":1697589515310,"user_tz":-540,"elapsed":727,"user":{"displayName":"digitalcodes KICT","userId":"11324252449574396480"}},"outputId":"77e0e5fa-397f-4e9a-9e5f-b8bd174e148d"},"outputs":[{"output_type":"stream","name":"stdout","text":["Cloning into 'tomok'...\n","remote: Enumerating objects: 147, done.\u001b[K\n","remote: Counting objects: 100% (89/89), done.\u001b[K\n","remote: Compressing objects: 100% (63/63), done.\u001b[K\n","remote: Total 147 (delta 45), reused 63 (delta 26), pack-reused 58\u001b[K\n","Receiving objects: 100% (147/147), 129.26 KiB | 12.93 MiB/s, done.\n","Resolving deltas: 100% (53/53), done.\n"]}],"source":["!git clone https://github.com/KU-HIAI/tomok.git"]},{"cell_type":"markdown","metadata":{"id":"poob594xiNFU"},"source":["필요한 파일을 불러온 다음에는 현재 작업 경로를 tomok의 파일이 있는 위치로 이동합니다.<br><br>\n","아래의 코드 블록을 실행하면, 작성자의 기본 작업 경로가 필요한 파일이 있는 위치로 이동됩니다."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"qyIxAqkriO26","executionInfo":{"status":"ok","timestamp":1697589515310,"user_tz":-540,"elapsed":11,"user":{"displayName":"digitalcodes KICT","userId":"11324252449574396480"}},"outputId":"abb79bcb-d823-48f4-b98c-0743f006c504"},"outputs":[{"output_type":"stream","name":"stdout","text":["/content/tomok\n"]}],"source":["cd tomok"]},{"cell_type":"markdown","metadata":{"id":"8lGDCXNZiej5"},"source":["## 룰 유닛 작성해보기\n","지금까지의 내용을 바탕으로 룰 유닛을 작성해봅시다.\n","\n","새로운 룰 유닛을 작성하기 위해서는, 아래 코드 블럭에서 클래스 이름, 메타정보에 해당하는 변수, 실행 함수의 이름과 내용을 수정하면 됩니다."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"rfDi2pQqicoD"},"outputs":[],"source":["import math\n","from typing import List\n","\n","import tomok\n","\n","# 작성하는 룰에 맞게 클래스 이름 수정 (KDS249011_04020203_02)\n","class KDS249011_04020203_02 (tomok.RuleUnit):\n","\n","    # 아래 클래스 멤버 변수에 할당되는 값들을 작성하는 룰에 맞게 수정\n","    priority = 1   # 건설기준 우선순위\n","    author = 'Seohyun Jin'  # 작성자명\n","    ref_code = 'KDS 24 90 11 4.2.2.3 (2)' # 건설기준문서\n","    ref_date = '2021-04-12'  # 디지털 건설문서 작성일\n","    doc_date = '2023-09-27'  # 건설기준문서->디지털 건설기준 변환 기준일\n","    title = '가동받침의 이동량'    # 건설기준명\n","\n","    #\n","    description = \"\"\"\n","    교량 기타시설설계기준 (한계상태설계법)\n","    4. 설계\n","    4.2 받침\n","    4.2.2 설계일반\n","    4.2.2.3 이동량\n","    (2)\n","    \"\"\"\n","    # https://dillinger.io/ 표와 이미지 랜더링 확인 사이트\n","    # 이미지 링크 변환 사이트 https://www.somanet.xyz/2017/06/blog-post_21.html\n","    # 건설기준문서내용(text)\n","    content = \"\"\"\n","\n","\n","    \"\"\"\n","    # 플로우차트(mermaid)\n","    flowchart = \"\"\"\n","    flowchart TD\n","    subgraph Python_Class\n","    A[전단성능 검증];\n","    B[\"KDS 24 90 11 4.2.2.3 (2)\"];\n","    A ~~~ B\n","    end\n","\n","\t\tsubgraph Variable_def;\n","\t\tVarOut1[/출력변수: 가동받침의 이동량/];\n","    VarIn1[/입력변수: 온도변화에 의한 이동량/];\n","\t\tVarIn2[/입력변수: 활하중으로 거더의 처짐에 의한 이동량/];\n","\t\tVarIn3[/입력변수:콘크리트의 건조수축에 의한 이동량/];\n","\t\tVarIn4[/입력변수:콘크리트의 크리프에 의한 이동량/];\n","\t\tVarIn5[/입력변수:열팽창계수/];\n","\t\tVarIn6[/입력변수:신축거더 길이/];\n","\t\tVarIn7[/입력변수:건조수축, 크리프의 저감계수/];\n","\t\tVarIn8[/입력변수:프리스트레싱 직후의 PS 강재에 작용하는 인장력/];\n","\t\tVarIn9[/입력변수:콘크리트 단면적/];\n","\t\tVarIn10[/입력변수:콘크리트 탄성계수/];\n","\t\tVarIn11[/입력변수:콘크리트의 크리프계수/];\n","\t\tVarIn12[/출력변수:건조수축에 해당하는 온도변화/];\n","\t\tVarIn13[/입력변수:거더의 중립축으로부터 받침의 회전중심까지의 거리/];\n","\t\tVarIn14[/입력변수:받침 상부의 거더의 회전각/];\n","\n","\t\tVarOut1 ~~~ VarIn1 & VarIn2 & VarIn3\n","    VarIn2 ~~~ VarIn4 & VarIn5 & VarIn6\n","    VarIn5 ~~~ VarIn7 & VarIn8 & VarIn9\n","\t\tVarIn8 ~~~ VarIn10 & VarIn11 & VarIn12\n","\t\tVarIn11 ~~~ VarIn13 & VarIn14\n","\t\tend\n","\t\tPython_Class ~~~ Variable_def;\n","\t\tVariable_def--->G & H\n","\t\tG & H--->D\n","\t\tG--->E\n","\t\tG[\"β= 건조수축, 크리프의 저감계수\"]\n","\t\tG~~~ |\"KDS 24 90 11 table 4.2-1\"| G\n","\t\tH[\"Φ= 콘크리트 크리프계수\"]\n","\t\tH~~~|\"KDS 24 90 11 table 4.2-2\"| H\n","\t\tD[\"<img src='https://latex.codecogs.com/svg.image?\\bigtriangleup&space;l_{c}=\\frac{P_{i}}{E_{c}A_{c}}\\phi&space;l\\beta&space;'>--------------------------------------------------------\"];\n","\t\tE[\"<img src='https://latex.codecogs.com/svg.image?\\bigtriangleup&space;l_{s}=\\bigtriangleup&space;T\\alpha&space;l\\beta&space;'>--------------------------------------------------------\"];\n","\t\tVariable_def--->F\n","\t\tF[\"<img src='https://latex.codecogs.com/svg.image?\\bigtriangleup&space;l_{t}=\\bigtriangleup&space;T\\alpha&space;l'>--------------------------------------------------------\"];\n","\t\tJ[\"<img src='https://latex.codecogs.com/svg.image?\\bigtriangleup&space;l_{r}=\\sum(h_{i}\\theta&space;_{i})'>--------------------------------------------------------\"];\n","\t  Variable_def--->J\n","\t  D & E & F & J---->K--->L\n","\t  K[\"<img src='https://latex.codecogs.com/svg.image?\\bigtriangleup&space;l=\\bigtriangleup&space;l_{t}&plus;\\bigtriangleup&space;l_{r}&plus;\\bigtriangleup&space;l_{s}&plus;\\bigtriangleup&space;l_{c}'>--------------------------------------------------------\"];\n","\t  L([\"가동받침의 이동량\"])\n","\n","    \"\"\"\n","\n","    # 작성하는 룰에 맞게 함수 이름과 내용을 수정,\n","    @tomok.rule_method\n","    def Movable_Bearing_Change(fOmovnch,fIdeltalt,fIdeltalr,fIdeltals,fIdeltalc,fIalpha,fIl,fIbeta,fIPi,fIAc,fIEc,fIphi,fIdeltaT,fIhi,fIthetai) -> float:\n","        \"\"\"가동받침의 이동량\n","\n","        Args:\n","            fOmovnch (float): 가동받침의 이동량\n","            fIdeltalt (float): 온도변화에 의한 이동량\n","            fIdeltalr (float): 활하중으로 거더의 처짐에 의한 이동량\n","            fIdeltals (float): 콘크리트의 건조수축에 의한 이동량\n","            fIdeltalc (float): 콘크리트의 크리프에 의한 이동량\n","            fIalpha (float): 열팽창계수\n","            fIl (float): 신축거더 길이\n","            fIbeta (float): 건조수축, 크리프의 저감계수\n","            fIPi (float): 프리스트레싱 직후의 PS 강재에 작용하는 인장력\n","            fIAc (float): 콘크리트 단면적\n","            fIEc (float): 콘크리트 탄성계수\n","            fIphi (float): 콘크리트의 크리프계수\n","            fIdeltaT (float): 건조수축에 해당하는 온도변화\n","            fIhi (float): 거더의 중립축으로부터 받침의 회전중심까지의 거리\n","            fIthetai (float): 받침 상부의 거더의 회전각\n","\n","        Returns:\n","            float: 교량 기타시설설계기준 (한계상태설계법)  4.2.2.3 이동량 (2)의 값\n","        \"\"\"\n","\n","        fOmovnch = fIdeltaT*fIalpha*fIl+fIhi*fIthetai+fIdeltaT*fIalpha*fIl*fIbeta+fIPi*fIphi*fIl*fIbeta/(fIAc*fIEc)\n","        return fOmovnch\n"]},{"cell_type":"markdown","source":[],"metadata":{"id":"yVE_Q1rB2KwO"}},{"cell_type":"markdown","metadata":{"id":"9oy-Y8abiiIu"},"source":["작성한 룰 유닛은 아래의 코드 블럭과 같이 생성하여, 작성자가 임의로 검증을 수행할 수 있습니다."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"D1Pm_gEtikei"},"outputs":[],"source":["my_RuleUnit = KDS249011_04020203_02()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"HVyDu2z7imJC"},"outputs":[],"source":["fOmovnch = None\n","fIdeltalt = 90\n","fIdeltalr = 7.86\n","fIdeltals = 63\n","fIdeltalc = 3.30\n","fIalpha = 1.0\n","fIl = 30\n","fIbeta = 0.7\n","fIPi = 30\n","fIAc = 3000\n","fIEc = 25\n","fIphi = 2.0\n","fIdeltaT = 3\n","fIhi = 20\n","fIthetai = 0.393"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"UDa_8Sh_iraQ","executionInfo":{"status":"ok","timestamp":1697589515310,"user_tz":-540,"elapsed":10,"user":{"displayName":"digitalcodes KICT","userId":"11324252449574396480"}},"colab":{"base_uri":"https://localhost:8080/"},"outputId":"76333a4a-b97c-4630-9afd-4f3c293d0527"},"outputs":[{"output_type":"stream","name":"stdout","text":["RuleUnit Review Result: 160.87679999999997\n"]}],"source":["Rule_Review_Result = my_RuleUnit.Movable_Bearing_Change(fOmovnch,fIdeltalt,fIdeltalr,fIdeltals,fIdeltalc,fIalpha,fIl,fIbeta,fIPi,fIAc,fIEc,fIphi,fIdeltaT,fIhi,fIthetai)\n","# 해당건설기준 항목 를 통과하는가?\n","\n","print(\"RuleUnit Review Result: {}\".format(Rule_Review_Result))"]},{"cell_type":"markdown","metadata":{"id":"7TnAwYSbiqpE"},"source":["<br><br>\n","아래의 코드를 통해, 룰 유닛의 content(건설기준 항목의 실제 내용)의 markdown 렌더링 결과를 확인할 수 있습니다."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"3BSi3TyUiu6H","executionInfo":{"status":"ok","timestamp":1697589515311,"user_tz":-540,"elapsed":10,"user":{"displayName":"digitalcodes KICT","userId":"11324252449574396480"}},"colab":{"base_uri":"https://localhost:8080/","height":555},"outputId":"3c942b8e-7532-4f1e-9f2f-7ce9809e9dc5"},"outputs":[{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.Markdown object>"],"text/markdown":"\n    ####  4.2.2.3 이동량\n    (2) 가동받침의 이동량 산정\n    이동량은 일반적으로 다음 식을 따른다.\n\n    $$\\Delta l=\\Delta l_{t}+\\Delta l_{r}+\\Delta l_{s}+\\Delta l_{c}$$&#160;&#160;&#160;&#160;&#160;(4.2-2)\n    여기서, $$\\Delta l_{t}$$ = 온도변화에 의한 이동량($$\\Delta T\\cdot \u0007lpha \\cdot l$$)(mm)\n    $$\\Delta l_{r}$$ = 활하중으로 거더의 처짐에 의한 이동량($$\\Sigma (h_{i}\\cdot \theta _{i})$$)(mm)\n    $$\\Delta l_{s}$$ = 콘크리트의 건조수축에 의한 이동량($$\\Delta T\\cdot \u0007lpha \\cdot l \\cdot \beta$$)(mm)\n    $$\\Delta l_{c}$$ = 콘크리트의 크리프에 의한 이동량($$\frac{P_{i}}{E_{c}A_{c}}\\phi \\cdot l\\cdot \beta$$)(mm)\n    $$\u0007lpha$$ = 열팽창계수\n    l = 신축거더 길이(mm)\n    $$\beta$$ = 건조수축, 크리프의 저감계수\n    $$P_{i}$$ = 프리스트레싱 직후의 PS 강재에 작용하는 인장력(N)\n    $$A_{c}$$ = 콘크리트 단면적($$mm^{2}$$)\n    $$E_{c}$$ = 콘크리트 탄성계수(MPa)\n    $$\\phi$$ = 콘크리트의 크리프계수\n    $$\\Delta T$$ = 건조수축에 해당하는 온도변화(℃)\n    $$h_{i}$$ = 거더의 중립축으로부터 받침의 회전중심까지의 거리(mm)\n    $$\theta _{i}$$ = 받침 상부의 거더의 회전각(rad)\n\n\n    표 4.2-1 콘크리트의 크리프계수와 건조 수축량\n    | 콘크리트의 크리프 계수 \t| $$\\phi$$ = 2.0 \t|\n    |------------------------\t|----------------\t|\n    | 콘크리트의 건조수축    \t| 20℃  하강 상당 |\n\n\n    표 4.2-2 건조수축, 크리프의 저감계수 $$\beta$$\n    | 콘크리트의 재령(월)         \t| 0.25 \t| 0.5 \t| 1   \t| 3   \t| 6   \t| 12  \t| 24 \t|\n    |-----------------------------\t|------\t|-----\t|-----\t|-----\t|-----\t|-----\t|----\t|\n    | 건조수축, 크리프의 저감계수 ($$\beta$$) \t| 0.8  \t| 0.7 \t| 0.6 \t| 0.4 \t| 0.3 \t| 0.2 \t| 0.1 |\n    "},"metadata":{}}],"source":["my_RuleUnit.render_markdown()"]}],"metadata":{"colab":{"provenance":[{"file_id":"1SJuH3C7x3JKgqjMSKmuKhe7WUlH9nN0r","timestamp":1691543669780},{"file_id":"1T-kPFUJTy0JUtisu6LLIsNK6yjl9AE5z","timestamp":1689928261860},{"file_id":"1FKcEkmC8sjFendaUJI5nY9FQVPYBFWnt","timestamp":1689903322566},{"file_id":"1p6jLaorqf3Zl1Og2wHOctERtkgjwBjrU","timestamp":1689753625918},{"file_id":"15jZPegTcUqCXxee33FxMzfCjeMAwcNRA","timestamp":1688037542443}]},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}