{"cells":[{"cell_type":"markdown","metadata":{"id":"-0-qnEblh80w"},"source":["# Rule Unit 작성 예시\n","\n","본 문서는 1차년도 6월에 개발된 RuleUnit 클래스를 활용하여 룰 유닛을 작성하고 실행하는 과정을 설명합니다."]},{"cell_type":"markdown","metadata":{"id":"AR83L9Pxh_6F"},"source":["⚠︎ 주의사항: 코드를 변경하며 작업할 때는, 사본을 생성한 후 작업해주십시오."]},{"cell_type":"markdown","metadata":{"id":"33RPd0N_iCuY"},"source":["## 룰 유닛 작성하기\n","이 부분에서는 기존의 IFC 파일에 종속적이었던 실행 흐름에서 벗어나, 새로이 정의한 RuleUnit 구조에 기반하여 룰에 포함된 항목을 작성하는 방법을 다룹니다.<br><br>\n","본 예시에서는 KDS 24 14 21 4.6.5.1(5) 를 룰 유닛으로 작성합니다."]},{"cell_type":"markdown","metadata":{"id":"qL08gaStiE0L"},"source":["먼저, Rule 작성에 필요한 프로그램을 불러오기 위해 Github에서 아래의 주소가 가리키는 파일 모음을 불러옵니다. (Github Repository를 clone합니다.)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"5AR_68PDk-KZ","executionInfo":{"status":"ok","timestamp":1700276762543,"user_tz":-540,"elapsed":361,"user":{"displayName":"digitalcodes KICT","userId":"11324252449574396480"}},"outputId":"b7ca5918-53d5-4abd-fa80-521c7d7bd48d"},"outputs":[{"output_type":"stream","name":"stdout","text":["fatal: destination path 'tomok' already exists and is not an empty directory.\n"]}],"source":["!git clone https://github.com/KU-HIAI/tomok.git"]},{"cell_type":"markdown","metadata":{"id":"poob594xiNFU"},"source":["필요한 파일을 불러온 다음에는 현재 작업 경로를 tomok의 파일이 있는 위치로 이동합니다.<br><br>\n","아래의 코드 블록을 실행하면, 작성자의 기본 작업 경로가 필요한 파일이 있는 위치로 이동됩니다."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"qyIxAqkriO26","executionInfo":{"status":"ok","timestamp":1700276762893,"user_tz":-540,"elapsed":6,"user":{"displayName":"digitalcodes KICT","userId":"11324252449574396480"}},"outputId":"ae65e0c8-bf2d-4367-c2bd-3e54c0de4d31"},"outputs":[{"output_type":"stream","name":"stdout","text":["/content/tomok/tomok\n"]}],"source":["cd tomok"]},{"cell_type":"markdown","metadata":{"id":"8lGDCXNZiej5"},"source":["## 룰 유닛 작성해보기\n","지금까지의 내용을 바탕으로 룰 유닛을 작성해봅시다.\n","\n","새로운 룰 유닛을 작성하기 위해서는, 아래 코드 블럭에서 클래스 이름, 메타정보에 해당하는 변수, 실행 함수의 이름과 내용을 수정하면 됩니다."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"rfDi2pQqicoD"},"outputs":[],"source":["import math\n","from typing import List\n","\n","import tomok\n","\n","# 작성하는 룰에 맞게 클래스 이름 수정 (KDS241421_04060206_05)\n","class KDS241421_04060206_05 (tomok.RuleUnit):\n","\n","    # 아래 클래스 멤버 변수에 할당되는 값들을 작성하는 룰에 맞게 수정\n","    priority = 1   # 건설기준 우선순위\n","    author = 'Hyunjong Shin'  # 작성자명\n","    ref_code = 'KDS 24 14 21 4.6.2.6 (5)' # 건설기준문서\n","    ref_date = '2021-04-12'  # 디지털 건설문서 작성일\n","    doc_date = '2023-11-13'  # 건설기준문서->디지털 건설기준 변환 기준일\n","    title = '전단철근비'    # 건설기준명\n","\n","    #\n","    description = \"\"\"\n","    콘크리트교 설계기준 (한계상태설계법)\n","    4. 설계\n","    4.6 부재 상세\n","    4.6.2 보\n","    4.6.2.6 전단철근\n","    (5)\n","    \"\"\"\n","    # https://dillinger.io/ 표와 이미지 랜더링 확인 사이트\n","    # 이미지 링크 변환 사이트 https://www.somanet.xyz/2017/06/blog-post_21.html\n","    # 건설기준문서내용(text)\n","    content = \"\"\"\n","\n","    \"\"\"\n","    # 플로우차트(mermaid)\n","    flowchart = \"\"\"\n","   flowchart TD\n","    subgraph Python_Class\n","    A[\"전단철근비\"];\n","    B[\"KDS 24 14 21 4.6.2.6 (5)\"];\n","    A ~~~ B\n","    end\n","\n","\t\tsubgraph Variable_def;\n","\t\tVarIn1[/입력변수:길이 s내의 전단철근 단면적/];\n","\t\tVarIn2[/입력변수:부재의 종방향 축을 따른 전단철근의 간격/];\n","\t\tVarIn3[/입력변수: 부재의 복부 폭/]\n","\t\tVarIn4[/입력변수: 전단철근과 부재축과의 각/]\n","\t\t\tVarIn5[/입력변수: 전단철근비/]\n","\t\t\tVarIn6[/입력변수: 28일 콘크리트 공시체의 기준 압축강도/]\n","\t\tVarIn7[/입력변수: 철근의 기준항복강도/]\n","\t\tVarOut1[/출력변수: 전단철근비/]\n","\t\t\tVarOut1~~~VarIn1 & VarIn2 & VarIn3\n","\t\t\tVarIn2~~~VarIn4 & VarIn5 & VarIn6 & VarIn7\n","\t\tend\n","\n","\t\tPython_Class ~~~ Variable_def--->F--->E--->H-->I\n","\n","\t\tE[\"<img src='https://latex.codecogs.com/svg.image?\\rho&space;_{v}=A_v/(sb_wsin\\alpha)'>---------------------------------\"]\n","\t\tF[\"<img src='https://latex.codecogs.com/svg.image?\\rho&space;_{v,min}=(0.08\\sqrt{f_{ck}})/f_y'>---------------------------------\"]\n","\n","\t\tH[\"<img src='https://latex.codecogs.com/svg.image?\\rho&space;_{v}\\geq\\rho&space;_{v,min}'>---------------------------------\"]\n","\n","\t\t\tI([\"전단철근비\"])\n","    \"\"\"\n","\n","    # 작성하는 룰에 맞게 함수 이름과 내용을 수정,\n","    @tomok.rule_method\n","    def Shear_reinforcement_ratio(fOrhov,fIAv,fIs,fIbw,fIalpha,fIrhovmin,fIfck,fIfy) ->float:\n","        \"\"\"전단철근비\n","        Args:\n","             fOrhov (float): 전단철근비\n","             fIAv (float): 길이 s내의 전단철근 단면적\n","             fIs (float): 부재의 종방향 축을 따른 전단철근의 간격\n","             fIbw (float): 부재의 복부 폭\n","             fIalpha (float): 전단철근과 부재축과의 각\n","             fIrhovmin (float): 최소 전단철근비\n","             fIfck (float): 28일 콘크리트 공시체의 기준 압축강도\n","             fIfy (float): 철근의 기준항복강도\n","\n","        Returns:\n","            float: 콘크리트교 설계기준 (한계상태설계법) 4.6.2.6 전단철근에서 전단철근비(5)의 값\n","        \"\"\"\n","        import math\n","        fIrhovmin = (0.08*fIfck)/fIfy\n","        fOrhov = max(fIAv/(fIs*fIbw*math.sin(math.radians(fIalpha))) , fIrhovmin)\n","\n","        return fOrhov\n"]},{"cell_type":"markdown","source":[],"metadata":{"id":"yVE_Q1rB2KwO"}},{"cell_type":"markdown","metadata":{"id":"9oy-Y8abiiIu"},"source":["작성한 룰 유닛은 아래의 코드 블럭과 같이 생성하여, 작성자가 임의로 검증을 수행할 수 있습니다."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"D1Pm_gEtikei"},"outputs":[],"source":["my_RuleUnit = KDS241421_04060206_05()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"HVyDu2z7imJC"},"outputs":[],"source":["fOrhov = 0.5\n","fIAv = 300\n","fIs = 30\n","fIbw = 40\n","fIalpha = 30\n","fIrhovmin = 9.80e-4\n","fIfck = 24\n","fIfy = 400"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"UDa_8Sh_iraQ","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1700276762894,"user_tz":-540,"elapsed":5,"user":{"displayName":"digitalcodes KICT","userId":"11324252449574396480"}},"outputId":"b0fd7de5-4ca3-44b7-cc80-ea4c6890a3f5"},"outputs":[{"output_type":"stream","name":"stdout","text":["RuleUnit Review Result: 0.5000000000000001\n"]}],"source":["Rule_Review_Result = my_RuleUnit.Shear_reinforcement_ratio(fOrhov,fIAv,fIs,fIbw,fIalpha,fIrhovmin,fIfck,fIfy)\n","# 해당건설기준 항목 의 값은 무엇인가?\n","\n","print(\"RuleUnit Review Result: {}\".format(Rule_Review_Result))"]},{"cell_type":"markdown","metadata":{"id":"7TnAwYSbiqpE"},"source":["<br><br>\n","아래의 코드를 통해, 룰 유닛의 content(건설기준 항목의 실제 내용)의 markdown 렌더링 결과를 확인할 수 있습니다."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"3BSi3TyUiu6H","colab":{"base_uri":"https://localhost:8080/","height":161},"executionInfo":{"status":"ok","timestamp":1700276762894,"user_tz":-540,"elapsed":4,"user":{"displayName":"digitalcodes KICT","userId":"11324252449574396480"}},"outputId":"87688fe6-fc31-4a22-de03-6d5a5f6e723a"},"outputs":[{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.Markdown object>"],"text/markdown":"\n    ####  4.6.2.6 전단철근\n    \n (5) 전단철근비 $\rho_{v}$는 식 (4.6-6)을 따른다.\n     \n $$ \rho_{v} = \frac{A_{v}}{s*b_{w}*sin\u0007lpha} (4.6-6)$$\n      \n여기서, $\rho_{v}$ = 전단철근비\n      $A_{v}$ = 길이 $s$내의 전단철근 단면적\n       $s$ = 부재의 종방향 축을 따른 전단철근의 간격\n       $b_{w}$ = 부재의 복부 폭\n       $\u0007lpha$ = 전단철근과 부재축과의 각\n       $\rho_{v}$ 는 다음 최솟값 이상이어야 한다.\n       \n $$ \rho_{v,min} = \frac{(0.08*\\sqrt{f_{ck}})}{f_{y}} (4.6-7)$$\n\n    "},"metadata":{}}],"source":["my_RuleUnit.render_markdown()"]}],"metadata":{"colab":{"provenance":[{"file_id":"1SJuH3C7x3JKgqjMSKmuKhe7WUlH9nN0r","timestamp":1691543669780},{"file_id":"1T-kPFUJTy0JUtisu6LLIsNK6yjl9AE5z","timestamp":1689928261860},{"file_id":"1FKcEkmC8sjFendaUJI5nY9FQVPYBFWnt","timestamp":1689903322566},{"file_id":"1p6jLaorqf3Zl1Og2wHOctERtkgjwBjrU","timestamp":1689753625918},{"file_id":"15jZPegTcUqCXxee33FxMzfCjeMAwcNRA","timestamp":1688037542443}]},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}